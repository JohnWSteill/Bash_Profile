#!/bin/bash
function use_R {
    Rver=$1
    for p in ${PATH//:/ }; do
        pp=`echo $p | awk '/R-[0-9]\.[0-9]\.[0-9]/{print $0 }'`
        if [[ ! -z $pp ]] ; then
            path_remove $pp
        fi
    done
    for p in ${LD_LIBRARY_PATH//:/ }; do
        pp=`echo $p | awk '/R-[0-9]\.[0-9]\.[0-9]/{print $0 }'`
        if [[ ! -z $pp ]] ; then
            path_remove_ld $pp
        fi
    done
    export R_HOME_base="/isitools/R-$Rver"
    export R_HOME="$R_HOME_base/lib64/R"
    export PATH=$R_HOME:$R_HOME_base/bin:$PATH
    export R_LIBS=${HOME}/lib/R_Lib:$R_HOME
    export R_LIBS_USER=/isitools/R-packages_$Rver
    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$R_HOME/bin:$R_HOME/lib
}


unset USERNAME

if ! [ $onMac == true ] 
then 
    REV=`cat /etc/redhat-release | sed s/.*release\ // | sed s/\ .*//` 
    echo "This is a CentOS $REV machine"
    export SVN_EDITOR=vi
    PATH=/usr/bin:/bin:/usr/lib64:$HOME/bin:$PATH
    umask 0002
    export PATH=/isitools/trinityrnaseq_r2013-02-25:/isitools/ncbi-blast-2.2.28+/FastQC:$PATH #  Removed /isitools/GUP/gup:$PATH 
    export PATH=/isitools:/isitools/bowtie-0.12.9:/isitools/rsem-1.2.3:/isitools/trinityrnaseq_r20140413p1:/isitools/ncbi-blast-2.2.28+/bin:/isitools/blat/bin:/isitools:/isitools/FastQC:/isitools/rsem_eval_1.3:/isitools/STAR_2.3.0e:/isitools/CASAVA_v1.8.2/bin:/isitools/meme/bin:/isitools/novocraft-3.02:/isitools/samtools:/isitools/bedtools-2.17.0/bin:/isitools/matrix2png_1.2.2/bin:/isitools/bowtie2-2.1.0:/isitools/bwa-0.7.5a:/isitools/clustalw2.1:/isitools/boost_1_53_0:/isitools/boost_1_53_0/bin.v2:/isitools/cufflinks:/isitools/miRanda3.3a/bin:/isitools/454/bin:/isitools/454/apps:/isitools/MaSuRCA2.2.1:/isitools/MaSuRCA2.2.1/lib:/isitools/MaSuRCA2.2.1/lib:/isitools/ucsc/linux.x86_64:/isitools/matlab-2013b/bin/:/isitools/matlab-2013b/:/isitools/fftw3.3.4:/isitools/fftw3.3.4/bin:/isitools/fftw3.3.4/lib:/isitools/csem-2.4:/isitools/sratoolkit.2.4.2-centos_linux64/bin:/isitools/swig-3.0.5:/isitools/hp-bootstrap/bin:/isitools/.cabal/bin:/isitools/fasta-36.3.8c/bin:/isitools/shiny-server/bin/shiny-server:$PATH
    export ISIHOME=/isitools
    export LD_LIBRARY_PATH=/$LD_LIBRARY_PATH:/isitools/gcc4.8/isl0.12.2/lib
    export PATH=/isitools/Python2.7.4/bin:$PATH
    export WORKON_HOME=$HOME/.virtualenvs
    export PYTHONPATH=/isitools/Python2.7.4/bin:$PYTHONPATH
    export LD_LIBRARY_PATH=/$LD_LIBRARY_PATH:/isitools/Python2.7.4/lib
    export VIRTUALENVWRAPPER_PYTHON=/isitools/Python2.7.4/bin/python
    export VIRTUALENVWRAPPER_VIRTUALENV=/isitools/Python2.7.4/bin/virtualenv
    source /isitools/virtualenvwrapper-3.6/virtualenvwrapper.sh
    alias envp="source ~/bin/GupEnv/bin/activate"
    alias envp_off="source ~/bin/GupEnv/bin/deactivate"
    export PYTHONPATH=~/bin:$PYTHONPATH 
    use_R 3.1.3 #DEFAULT SYSTEM R LIBRARY
    envp
fi

if [ $UID -gt 99 ] && [ "`id -gn`" = "`id -un`" ]; then
    umask 002
else
    umask 022
fi

alias pta="python -m unittest discover"
alias aa8="autopep8 --in-place --aggressive --aggressive "


